{% extends "base.html" %}

{% block title %}Settings - Template Bash Script Editor{% endblock %}

{% block content %}
<br/>
<h3 class="pb-2 mb-4 border-bottom">Settings</h3>
<p class="mb-4 text-muted">Configure additional root directory for saving scripts.</p>

<form id="settingsForm" class="mt-3"
      data-settings-url="{{ url_for('api_get_settings') }}"
      data-save-settings-url="{{ url_for('api_save_settings') }}"
      data-index-url="{{ url_for('index') }}">
  <div class="card mb-4 shadow-sm" style="border-radius: 10px;">
    <div class="card-body">
      <label for="navbar_color" class="form-label fw-semibold">Navbar Color</label>
      <select class="form-select mb-2" id="navbar_color" name="navbar_color">
        {% for color_value, color_label in allowed_nav_colors %}
        <option value="{{ color_value }}" {% if navbar_color == color_value %}selected{% endif %}>{{ color_label }}</option>
        {% endfor %}
      </select>
      <div class="form-text">Choose the color for the navigation bar.</div>
      <div class="mt-2">
        <span class="badge rounded-pill text-dark" id="navbar_color_preview" style="background-color: {{ navbar_color }};">Preview</span>
      </div>
    </div>
  </div>

  <div class="card mb-4 shadow-sm" style="border-radius: 10px;">
    <div class="card-body">
      <label for="additional_root" class="form-label fw-semibold">Additional Root Directory</label>
      <input type="text" class="form-control mb-2" id="additional_root" name="additional_root"
             placeholder="/absolute/path/to/directory">
      <div class="form-text">Absolute path to an additional directory that will appear in the "Save to..." dialog. Leave empty to only use your home directory.</div>
      <div id="pathValidation" class="mt-2" style="display: none;"></div>
    </div>
  </div>

  <div id="settingsError" class="alert alert-danger" style="display: none;"></div>
  <div id="settingsSuccess" class="alert alert-success" style="display: none;"></div>

  <button type="submit" class="btn btn-primary px-4 py-2" style="border-radius: 6px;">Save</button>
  <a href="{{ url_for('index') }}" class="btn btn-secondary px-4 py-2 ms-2" style="border-radius: 6px;">Cancel</a>
</form>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/settings.js') }}"></script>
{% endblock %}
